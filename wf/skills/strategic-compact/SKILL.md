---
name: strategic-compact
description: |
    コンテキストが大きくなった時に戦略的にコンパクトを実行します。
    Trigger: context large, compact, long session
model: haiku
---

## Description
auto-compaction に任せず、論理的な区切りで戦略的に `/compact` を実行します。

## いつコンパクトすべきか

### 推奨タイミング
- 調査・計画が完了し、実装に移る前
- 機能の実装が完了し、次のタスクに移る前
- デバッグが完了し、次の作業に移る前
- 失敗したアプローチを捨てて別の方法を試す前

### コンパクトしてはいけないタイミング
- 実装の途中
- デバッグの途中（原因分析中）
- 複数ファイルの変更を同時に行っている最中

## コンパクト後に失われるもの
- 会話の中間推論・文脈
- 読み取ったファイルの内容
- ツール実行の履歴
- 口頭での指示・好み

## コンパクト後も残るもの
- CLAUDE.md の内容
- タスクリスト
- メモリファイル
- git の状態
- ディスク上のファイル

## コンパクト前にやること
重要なコンテキストがある場合は、コンパクト前にファイルに書き出してください。
- 決定事項 → CLAUDE.md やメモリファイルに記録
- 進捗状況 → タスクリストを更新
- 次のステップ → タスクとして追加

## 実行
```
/compact <現在の状況と次にやることの要約>
```
